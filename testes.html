<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Relatório</title>
</head>
<body>
  <input type="text" id="relatorio" placeholder="Digite a identificação">
  <button onclick="buscarRelatorio()">Buscar</button>

  <div id="mensagem-aguarde" style="display:none;">Aguarde, carregando...</div>
  <div id="resultado" style="display:none;"></div>

  <div id="pdf-container" style="display:none;">
    <iframe id="pdf-viewer" width="100%" height="500px"></iframe>
  </div>

  <div class="carimbo" style="display:none;">Carimbo aqui</div>
  <div id="rodape" style="display:none;">Rodapé do relatório</div>

  <script>
    function buscarRelatorio() {
      const valor = document.getElementById('relatorio').value.trim();
      const resultado = document.getElementById('resultado');
      const pdfContainer = document.getElementById('pdf-container');
      const pdfViewer = document.getElementById('pdf-viewer');
      const rodape = document.getElementById('rodape');
      const carimbo = document.querySelector('.carimbo');
      const mensagemAguarde = document.getElementById('mensagem-aguarde');

      mensagemAguarde.style.display = 'block';
      resultado.style.display = 'none';
      pdfContainer.style.display = 'none';
      rodape.style.display = 'none';
      carimbo.style.display = 'none';

      function formatarDataHora() {
        const now = new Date();
        const dia = String(now.getDate()).padStart(2, '0');
        const mes = String(now.getMonth() + 1).padStart(2, '0');
        const ano = now.getFullYear();
        const hora = String(now.getHours()).padStart(2, '0');
        const minuto = String(now.getMinutes()).padStart(2, '0');
        return `${dia}/${mes}/${ano} às ${hora}:${minuto}`;
      }

      setTimeout(() => {
        mensagemAguarde.style.display = 'none';

        if (valor === '12345') {
          const dataHoraAtual = formatarDataHora();
          resultado.innerHTML = `<p><strong>Emissão concluída em ${dataHoraAtual}. Status: Aprovado.</strong></p>`;
          resultado.style.display = 'block';
          pdfViewer.src = 'DeclaracaoLucasSantaClara.pdf';
          pdfContainer.style.display = 'block';
          rodape.style.display = 'block';
          carimbo.style.display = 'block';
        } else if (valor === '') {
          resultado.innerHTML = "<p>Por favor, digite uma identificação.</p>";
          resultado.style.display = 'block';
        } else {
          resultado.innerHTML = "<p>Nenhum relatório encontrado para a identificação informada.</p>";
          resultado.style.display = 'block';
        }
      }, 1000);
    }

    document.getElementById('relatorio').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        buscarRelatorio();
      }
    });
  </script>
</body>
</html>
