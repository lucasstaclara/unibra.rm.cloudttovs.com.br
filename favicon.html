<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>unibra.rm.cloudtotvs.com.br/Corpore.Net/Source/Rpt-GeradorRelatoriosNet/RM.Rpt.Reports/Anonymous/RptFindReportByGuid.aspx</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
    }

    h1 {
      font-size: 14px;
      font-weight: bold;
      margin: 15px 0 8px 8px;
    }

    label {
      display: block;
      font-size: 12px;
      margin-left: 8px;
    }

    .buscador {
      margin: 5px 0 0 8px;
    }

    input[type="text"] {
      width: 400px;
      padding: 2px 4px;
      font-size: 11px;
      border: 1px solid #aaa;
      border-radius: 2px;
      height: 20px;
    }

    button {
      padding: 2px 8px;
      font-size: 11px;
      margin-left: 5px;
      border: 1px solid #999;
      border-radius: 3px;
      background-color: #f5f5f5;
      cursor: pointer;
      height: 22px;
    }

    button:hover {
      background-color: #e0e0e0;
    }

    #resultado {
      margin: 15px 8px;
      font-size: 12px;
      color: #333;
      display: none;
    }

    #pdf-container {
      margin: 15px 8px 60px 8px;
      display: none;
    }

    iframe {
      width: 45%;
      height: 800px;
      border: 1px solid #ccc;
      margin-bottom: 60px;
    }

    .rodape {
      margin-top: 30px;
      padding: 8px;
      font-size: 16px;
      color: #777;
      text-align: center;
      border-top: 1px solid #ddd;
      display: none;
    }

    .carimbo {
      margin-top: 10px;
      font-size: 10px;
      font-style: italic;
      color: #555;
      text-align: center;
      display: none;
    }

    /* LOGO COMO MARCA D'ÁGUA NO FUNDO */
    .logo-fundo {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: -1;
      opacity: 0.5;
    }

    .logo-fundo img {
      width: 500px;
      height: auto;
    }

    /* Tabela de resultados */
    #report-table {
      margin-top: 20px;
      width: 100%;
      border-collapse: collapse;
      display: none;
    }

    #report-table th, #report-table td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }

    #report-table th {
      background-color: #f0f0f0;
    }

    /* Estilos do loading */
    #loading {
      display: none;
      text-align: center;
      margin-top: 20px;
    }

    #loading img {
      width: 50px;
      height: 50px;
    }

  </style>
</head>
<body>
  <!-- LOGO COMO MARCA D'ÁGUA NO FUNDO -->
  <div class="logo-fundo">
    <img src="LOGOUNIBRA.png" alt="Logo Unibra">
  </div>

  <h1>TOTVS - Certificado de Emissão de Relatórios</h1>
  <label for="relatorio">Informe a identificação do relatório:</label>
  <div class="buscador">
    <input type="text" id="relatorio" name="relatorio" />
    <button onclick="buscarRelatorio()">Buscar</button>
  </div>

  <!-- Loading -->
  <div id="loading">
    <img src="loading.gif" alt="Carregando...">
    <p>Carregando...</p>
  </div>

  <!-- Tabela de resultados -->
  <table id="report-table">
    <tr>
      <th style="width: 30%;">Identificação</th>
      <th style="width: 50%;">Descrição</th>
      <th style="width: 20%;">Data de Criação</th>
    </tr>
    <tr>
      <td id="identificacao">2885ed50-7449-486a-aff8-97367e85a7c5</td>
      <td id="descricao">UB.DECL.001.1 - DECLARAÇÃO DE MATRÍCULA 2ª Via - SECRETARIA (AGILIS).NONE</td>
      <td id="data-criacao">15/04/2025 08:49:31</td>
    </tr>
  </table>

  <div id="resultado"></div>
  <div id="pdf-container">
    <iframe id="pdf-viewer" src=""></iframe>
  </div>

  <div class="carimbo">
    Documento gerado automaticamente em ambiente seguro.
  </div>

  <!-- Rodapé institucional (inicialmente oculto) -->
  <footer class="rodape" id="rodape">
    UNIBRA 2025 © Todos os direitos reservados.
  </footer>

  <script>
    function buscarRelatorio() {
      const valor = document.getElementById('relatorio').value.trim();
      const resultado = document.getElementById('resultado');
      const tabela = document.getElementById('report-table');
      const pdfContainer = document.getElementById('pdf-container');
      const pdfViewer = document.getElementById('pdf-viewer');
      const rodape = document.getElementById('rodape');
      const carimbo = document.querySelector('.carimbo');
      const loading = document.getElementById('loading');

      // Exibir o loading
      loading.style.display = 'block';
      tabela.style.display = 'none';
      resultado.style.display = 'none';
      pdfContainer.style.display = 'none';
      rodape.style.display = 'none';
      carimbo.style.display = 'none';

      // Simula o delay da busca
      setTimeout(() => {
        if (valor === '2885ed50-7449-486a-aff8-97367e85a7c5') {
          // Exibe a tabela e o resultado da busca
          tabela.style.display = 'table';
          resultado.innerHTML = `<p><strong>Emissão concluída em ${formatarDataHora()}. Status: Aprovado.</strong></p>`;
          resultado.style.display = 'block';
          pdfViewer.src = 'DeclaracaoLucasSantaClara.pdf';
          pdfContainer.style.display = 'block';
          rodape.style.display = 'block';
          carimbo.style.display = 'block';
        } else if (valor === '') {
          resultado.innerHTML = "<p>Por favor, digite uma identificação.</p>";
          resultado.style.display = 'block';
          pdfContainer.style.display = 'none';
          rodape.style.display = 'none';
          carimbo.style.display = 'none';
          tabela.style.display = 'none';
        } else {
          resultado.innerHTML = "<p>Nenhum relatório encontrado para a identificação informada.</p>";
          resultado.style.display = 'block';
          pdfContainer.style.display = 'none';
          rodape.style.display = 'none';
          carimbo.style.display = 'none';
          tabela.style.display = 'none';
        }

        // Ocultar o loading após a simulação de busca
        loading.style.display = 'none';
      }, 1500); // Simula 1,5 segundos de espera
    }

    function formatarDataHora() {
      const now = new Date();
      const dia = String(now.getDate()).padStart(2, '0');
      const mes = String(now.getMonth() + 1).padStart(2, '0');
      const ano = now.getFullYear();
      const hora = String(now.getHours()).padStart(2, '0');
      const minuto = String(now.getMinutes()).padStart(2, '0');
      return `${dia}/${mes}/${ano} às ${hora}:${minuto}`;
    }

    // Permitir Enter no campo de texto
    document.getElementById('relatorio').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        buscarRelatorio();
      }
    });
  </script>
</body>
</html>
